package com.infinity.wefriends;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class LoginActivity extends Activity {
	
	protected AsyncConnTask tasks = null;
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_login);
		
		tasks = new AsyncConnTask(this);
		((Button)findViewById(R.id.loginwindow_login_button)).setOnClickListener(new LoginButtonListener());
	}
	
	protected class LoginButtonListener implements View.OnClickListener {
		@Override
		public void onClick(View v) {
			String phone = ((EditText)findViewById(R.id.loginwindow_username_edit)).getText().toString();
			String password = ((EditText)findViewById(R.id.loginwindow_password_edit)).getText().toString();
			tasks.login(phone, password);
			((Button)findViewById(R.id.loginwindow_login_button)).setEnabled(false);
			((Button)findViewById(R.id.loginwindow_login_button)).setText(R.string.loggingin);
		}
		
	}
	
	public void onLoginFailed() {
		Toast.makeText(this, R.string.login_failed, Toast.LENGTH_SHORT).show();
		((Button)findViewById(R.id.loginwindow_login_button)).setEnabled(true);
		((Button)findViewById(R.id.loginwindow_login_button)).setText(R.string.login);
	}
	
	public void onConnectionError() {
		Toast.makeText(this, R.string.connection_error, Toast.LENGTH_SHORT).show();
	}

}
